---
// é¡µé¢å…ƒæ•°æ®
const pageTitle = "å“ˆå¸Œè®¡ç®—å™¨ - RuanTools";
const description = "è®¡ç®—æ–‡æœ¬å’Œæ–‡ä»¶çš„ MD5ã€SHA-1ã€SHA-256ã€SHA-512ã€SHA-3 ç­‰å¤šç§å“ˆå¸Œå€¼ã€‚";
---

<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <title>{pageTitle}</title>
    <!-- å¼•å…¥æ‰€éœ€çš„ JavaScript åº“ -->
    <script src="https://cdn.jsdelivr.net/npm/crypto-js@4.1.1/crypto-js.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/js-sha3@0.8.0/dist/sha3.min.js"></script>
    <style>
      /* åŸºç¡€æ ·å¼ */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        line-height: 1.6;
        color: #333;
        background: #f8f9fa;
        min-height: 100vh;
      }

      .container {
        max-width: 900px;
        margin: 0 auto;
        padding: 20px;
      }

      /* å¤´éƒ¨æ ·å¼ */
      .header {
        margin-bottom: 30px;
        text-align: center;
      }

      .header h1 {
        font-size: 2rem;
        font-weight: 600;
        margin-bottom: 8px;
        color: #1a1a1a;
      }

      .header p {
        color: #666;
        font-size: 0.95rem;
        max-width: 600px;
        margin: 0 auto;
      }

      /* å¡ç‰‡æ ·å¼ */
      .card {
        background: white;
        border-radius: 10px;
        padding: 25px;
        margin-bottom: 20px;
        border: 1px solid #e0e0e0;
      }

      .section-title {
        font-size: 1.2rem;
        font-weight: 600;
        margin-bottom: 20px;
        color: #2c3e50;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .section-title::before {
        content: "ğŸ”’";
        font-size: 1.1rem;
      }

      /* ç®—æ³•é€‰æ‹©å™¨ - å•é€‰æŒ‰é’®æ ·å¼ */
      .algorithm-selector {
        margin-bottom: 20px;
      }

      .algorithm-radio-group {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
        gap: 10px;
        margin-top: 10px;
      }

      .algorithm-radio-item {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s;
        font-size: 0.9rem;
        position: relative;
      }

      .algorithm-radio-item:hover {
        background: #f8f9fa;
        border-color: #bbb;
      }

      .algorithm-radio-item.selected {
        background: #007bff;
        color: white;
        border-color: #007bff;
      }

      .algorithm-radio-item input[type="radio"] {
        position: absolute;
        opacity: 0;
        width: 0;
        height: 0;
      }

      .algorithm-name {
        font-weight: 500;
      }

      .algorithm-bits {
        font-size: 0.8rem;
        opacity: 0.7;
        margin-left: auto;
      }

      .algorithm-radio-item.selected .algorithm-bits {
        color: rgba(255, 255, 255, 0.9);
      }

      /* è¾“å…¥åŒºåŸŸ */
      .input-group {
        margin-bottom: 20px;
      }

      .input-label {
        display: block;
        margin-bottom: 8px;
        font-size: 0.9rem;
        color: #555;
        font-weight: 500;
      }

      .textarea-field {
        width: 100%;
        min-height: 120px;
        padding: 12px 15px;
        border: 1px solid #ddd;
        border-radius: 6px;
        font-family: 'SF Mono', 'Monaco', 'Consolas', monospace;
        font-size: 0.9rem;
        resize: vertical;
        background: #fafafa;
        transition: border-color 0.2s;
      }

      .textarea-field:focus {
        outline: none;
        border-color: #007bff;
        background: white;
      }

      .textarea-field::placeholder {
        color: #999;
      }

      /* æ–‡ä»¶ä¸Šä¼  */
      .file-upload {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 20px;
        padding: 15px;
        border: 2px dashed #ddd;
        border-radius: 6px;
        background: #fafafa;
      }

      .file-input {
        display: none;
      }

      .file-label {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 10px 20px;
        background: #007bff;
        color: white;
        border-radius: 6px;
        cursor: pointer;
        font-size: 0.9rem;
        font-weight: 500;
        transition: background 0.2s;
      }

      .file-label:hover {
        background: #0056b3;
      }

      .file-name {
        font-size: 0.9rem;
        color: #666;
        flex: 1;
      }

      /* æŒ‰é’®ç»„ */
      .button-group {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-top: 15px;
      }

      .btn {
        padding: 10px 20px;
        border: none;
        border-radius: 6px;
        font-size: 0.9rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s;
        display: inline-flex;
        align-items: center;
        gap: 6px;
      }

      .btn-primary {
        background: #007bff;
        color: white;
      }

      .btn-primary:hover {
        background: #0056b3;
      }

      .btn-outline {
        background: white;
        color: #555;
        border: 1px solid #ddd;
      }

      .btn-outline:hover {
        background: #f8f9fa;
        border-color: #bbb;
      }

      /* åŠ è½½æŒ‡ç¤ºå™¨ */
      .loading {
        display: none;
        align-items: center;
        gap: 10px;
        margin: 15px 0;
        padding: 10px;
        background: #f8f9fa;
        border-radius: 6px;
        color: #666;
      }

      .loading-spinner {
        width: 20px;
        height: 20px;
        border: 3px solid #f3f3f3;
        border-top: 3px solid #007bff;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }

      /* ç»“æœå±•ç¤º */
      .results {
        margin-top: 25px;
        display: none;
      }

      .result-title {
        font-size: 1rem;
        font-weight: 600;
        margin-bottom: 15px;
        color: #2c3e50;
      }

      .hash-item {
        background: #f8f9fa;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 15px;
        border: 1px solid #e0e0e0;
      }

      .hash-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
      }

      .hash-name {
        font-size: 1rem;
        font-weight: 600;
        color: #2c3e50;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .hash-bits {
        font-size: 0.75rem;
        color: #666;
        background: #e9ecef;
        padding: 3px 8px;
        border-radius: 12px;
      }

      .hash-value {
        font-family: 'SF Mono', 'Monaco', 'Consolas', monospace;
        font-size: 0.9rem;
        color: #333;
        word-break: break-all;
        margin-bottom: 12px;
        line-height: 1.4;
      }

      .hash-actions {
        display: flex;
        justify-content: flex-end;
      }

      .copy-btn {
        padding: 6px 12px;
        font-size: 0.8rem;
        background: #007bff;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }

      .copy-btn:hover {
        background: #0056b3;
      }

      .copy-btn.copied {
        background: #28a745;
      }

      /* æ–‡ä»¶ä¿¡æ¯ */
      .file-info {
        display: none;
        margin-top: 20px;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 8px;
        border: 1px solid #e0e0e0;
      }

      .file-info-title {
        font-size: 0.9rem;
        font-weight: 600;
        margin-bottom: 10px;
        color: #2c3e50;
      }

      .file-details {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 10px;
        font-size: 0.85rem;
      }

      .file-detail {
        display: flex;
        justify-content: space-between;
        padding: 5px 0;
        border-bottom: 1px solid #e9ecef;
      }

      .file-detail:last-child {
        border-bottom: none;
      }

      .detail-label {
        color: #666;
      }

      .detail-value {
        font-weight: 500;
        color: #333;
      }

      /* è¿›åº¦æ¡ */
      .progress {
        display: none;
        margin: 15px 0;
      }

      .progress-bar {
        width: 100%;
        height: 6px;
        background: #e9ecef;
        border-radius: 3px;
        overflow: hidden;
      }

      .progress-fill {
        height: 100%;
        background: #007bff;
        width: 0%;
        transition: width 0.3s;
      }

      .progress-text {
        font-size: 0.8rem;
        color: #666;
        margin-top: 5px;
        text-align: center;
      }

      /* é¡µè„š */
      .footer {
        text-align: center;
        margin-top: 40px;
        padding-top: 20px;
        border-top: 1px solid #e0e0e0;
        color: #666;
        font-size: 0.9rem;
      }

      /* å“åº”å¼è®¾è®¡ */
      @media (max-width: 768px) {
        .container {
          padding: 15px;
        }

        .algorithm-radio-group {
          grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
        }

        .button-group {
          flex-direction: column;
        }

        .btn {
          width: 100%;
          justify-content: center;
        }

        .file-upload {
          flex-direction: column;
          align-items: stretch;
          gap: 10px;
        }

        .file-name {
          text-align: center;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- å¤´éƒ¨ -->
      <header class="header">
        <h1>å“ˆå¸Œè®¡ç®—å™¨</h1>
        <p>è®¡ç®—æ–‡æœ¬å’Œæ–‡ä»¶çš„å“ˆå¸Œå€¼ï¼Œæ¯æ¬¡åªèƒ½é€‰æ‹©ä¸€ç§ç®—æ³•</p>
      </header>

      <!-- ç®—æ³•é€‰æ‹© - æ”¹ä¸ºå•é€‰ -->
      <div class="card">
        <h2 class="section-title">é€‰æ‹©å“ˆå¸Œç®—æ³•</h2>
        <div class="algorithm-selector">
          <p style="color: #666; font-size: 0.9rem; margin-bottom: 10px;">
            è¯·é€‰æ‹©ä¸€ç§å“ˆå¸Œç®—æ³•ï¼ˆå•é€‰ï¼‰ï¼š
          </p>
          <div class="algorithm-radio-group" id="algorithm-radio-group">
            <!-- ç®—æ³•é€‰é¡¹å°†é€šè¿‡ JavaScript åŠ¨æ€ç”Ÿæˆ -->
          </div>
        </div>
      </div>

      <!-- æ–‡æœ¬å“ˆå¸Œè®¡ç®— -->
      <div class="card">
        <h2 class="section-title">æ–‡æœ¬å“ˆå¸Œè®¡ç®—</h2>
        
        <div class="input-group">
          <label for="text-input" class="input-label">è¾“å…¥æ–‡æœ¬</label>
          <textarea 
            id="text-input" 
            class="textarea-field" 
            placeholder="åœ¨æ­¤è¾“å…¥è¦è®¡ç®—å“ˆå¸Œçš„æ–‡æœ¬..."
            rows="6"
          ></textarea>
        </div>

        <div class="button-group">
          <button id="calculate-text-btn" class="btn btn-primary">è®¡ç®—å“ˆå¸Œ</button>
          <button id="clear-text-btn" class="btn btn-outline">æ¸…ç©ºæ–‡æœ¬</button>
          <button id="example-text-btn" class="btn btn-outline">ä½¿ç”¨ç¤ºä¾‹</button>
        </div>

        <div id="text-loading" class="loading">
          <div class="loading-spinner"></div>
          <span>æ­£åœ¨è®¡ç®—å“ˆå¸Œå€¼...</span>
        </div>
      </div>

      <!-- æ–‡ä»¶å“ˆå¸Œè®¡ç®— -->
      <div class="card">
        <h2 class="section-title">æ–‡ä»¶å“ˆå¸Œè®¡ç®—</h2>
        
        <div class="file-upload">
          <input type="file" id="file-input" class="file-input" />
          <label for="file-input" class="file-label">
            <span>ğŸ“ é€‰æ‹©æ–‡ä»¶</span>
          </label>
          <div id="file-name" class="file-name">æœªé€‰æ‹©æ–‡ä»¶</div>
        </div>

        <div class="progress" id="file-progress">
          <div class="progress-bar">
            <div class="progress-fill" id="progress-fill"></div>
          </div>
          <div class="progress-text" id="progress-text">0%</div>
        </div>

        <div class="button-group">
          <button id="calculate-file-btn" class="btn btn-primary" disabled>è®¡ç®—æ–‡ä»¶å“ˆå¸Œ</button>
          <button id="clear-file-btn" class="btn btn-outline">æ¸…é™¤æ–‡ä»¶</button>
        </div>

        <div id="file-loading" class="loading">
          <div class="loading-spinner"></div>
          <span>æ­£åœ¨è®¡ç®—æ–‡ä»¶å“ˆå¸Œ...</span>
        </div>

        <div id="file-info" class="file-info">
          <!-- æ–‡ä»¶ä¿¡æ¯å°†åœ¨è¿™é‡ŒåŠ¨æ€æ˜¾ç¤º -->
        </div>
      </div>

      <!-- ç»“æœæ˜¾ç¤º -->
      <div id="results-section" class="card" style="display: none;">
        <h3 class="result-title">å“ˆå¸Œè®¡ç®—ç»“æœ</h3>
        <div id="hash-results">
          <!-- å“ˆå¸Œç»“æœå°†åœ¨è¿™é‡ŒåŠ¨æ€æ˜¾ç¤º -->
        </div>
      </div>

      <!-- ä½¿ç”¨è¯´æ˜ -->
      <div class="card">
        <h2 class="section-title">ä½¿ç”¨è¯´æ˜</h2>
        <div style="color: #666; line-height: 1.6; font-size: 0.9rem;">
          <p><strong>æ”¯æŒçš„å“ˆå¸Œç®—æ³•ï¼š</strong></p>
          <ul style="padding-left: 20px; margin-top: 8px;">
            <li><strong>MD5</strong> - 128ä½å“ˆå¸Œï¼Œå¸¸ç”¨äºæ–‡ä»¶æ ¡éªŒ</li>
            <li><strong>SHA-1</strong> - 160ä½å“ˆå¸Œï¼Œå·²ä¸æ¨èç”¨äºå®‰å…¨ç”¨é€”</li>
            <li><strong>SHA-256</strong> - 256ä½SHA-2ç®—æ³•ï¼Œç›®å‰å¹¿æ³›ä½¿ç”¨</li>
            <li><strong>SHA-512</strong> - 512ä½SHA-2ç®—æ³•ï¼Œæ›´å®‰å…¨çš„ç‰ˆæœ¬</li>
            <li><strong>SHA-3-256</strong> - 256ä½SHA-3ç®—æ³•ï¼Œæ–°ä¸€ä»£æ ‡å‡†</li>
            <li><strong>SHA-3-512</strong> - 512ä½SHA-3ç®—æ³•</li>
          </ul>
          
          <p style="margin-top: 12px;"><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p>
          <ul style="padding-left: 20px; margin-top: 8px;">
            <li>æ¯æ¬¡åªèƒ½é€‰æ‹©ä¸€ç§å“ˆå¸Œç®—æ³•è¿›è¡Œè®¡ç®—</li>
            <li>æ‰€æœ‰è®¡ç®—å‡åœ¨æµè§ˆå™¨æœ¬åœ°å®Œæˆï¼Œæ–‡ä»¶ä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨</li>
            <li>å¤§æ–‡ä»¶è®¡ç®—å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´ï¼Œè¯·è€å¿ƒç­‰å¾…</li>
            <li>ç‚¹å‡»"å¤åˆ¶"æŒ‰é’®å¯ä»¥å¤åˆ¶å“ˆå¸Œå€¼</li>
          </ul>
        </div>
      </div>

      <!-- é¡µè„š -->
      <footer class="footer">
        <p>Â© 2024 RuanTools Â· å“ˆå¸Œè®¡ç®—å™¨</p>
        <p style="margin-top: 5px;">æ‰€æœ‰è®¡ç®—å‡åœ¨æµè§ˆå™¨æœ¬åœ°å®Œæˆï¼Œä¿è¯æ•°æ®å®‰å…¨</p>
      </footer>
    </div>

    <script>
      // åˆå§‹åŒ–ç®—æ³•åˆ—è¡¨ - ç§»é™¤äº† BLAKE2b
      const algorithms = [
        { id: 'md5', name: 'MD5', bits: '128ä½' },
        { id: 'sha1', name: 'SHA-1', bits: '160ä½' },
        { id: 'sha256', name: 'SHA-256', bits: '256ä½' },
        { id: 'sha512', name: 'SHA-512', bits: '512ä½' },
        { id: 'sha3-256', name: 'SHA-3-256', bits: '256ä½' },
        { id: 'sha3-512', name: 'SHA-3-512', bits: '512ä½' }
      ];

      // å½“å‰é€‰æ‹©çš„ç®—æ³•
      let selectedAlgorithm = 'sha256';
      // å½“å‰é€‰æ‹©çš„æ–‡ä»¶
      let selectedFile = null;

      // åˆå§‹åŒ–ç®—æ³•é€‰æ‹©å™¨ - æ”¹ä¸ºå•é€‰
      function initAlgorithmSelector() {
        const radioGroup = document.getElementById('algorithm-radio-group');
        radioGroup.innerHTML = '';
        
        algorithms.forEach(algo => {
          const item = document.createElement('label');
          item.className = `algorithm-radio-item ${selectedAlgorithm === algo.id ? 'selected' : ''}`;
          item.innerHTML = `
            <input 
              type="radio" 
              name="hash-algorithm" 
              value="${algo.id}" 
              ${selectedAlgorithm === algo.id ? 'checked' : ''}
            >
            <span class="algorithm-name">${algo.name}</span>
            <span class="algorithm-bits">${algo.bits}</span>
          `;
          
          // ç‚¹å‡»é€‰æ‹©ç®—æ³•
          item.addEventListener('click', (e) => {
            if (e.target.type !== 'radio') {
              const radio = item.querySelector('input[type="radio"]');
              radio.checked = true;
              selectedAlgorithm = radio.value;
              
              // æ›´æ–°æ‰€æœ‰é€‰é¡¹çš„é€‰ä¸­çŠ¶æ€
              document.querySelectorAll('.algorithm-radio-item').forEach(el => {
                el.classList.remove('selected');
              });
              item.classList.add('selected');
            }
          });
          
          // ç›´æ¥ç‚¹å‡»radioæŒ‰é’®
          const radio = item.querySelector('input[type="radio"]');
          radio.addEventListener('change', (e) => {
            if (e.target.checked) {
              selectedAlgorithm = e.target.value;
              
              // æ›´æ–°æ‰€æœ‰é€‰é¡¹çš„é€‰ä¸­çŠ¶æ€
              document.querySelectorAll('.algorithm-radio-item').forEach(el => {
                el.classList.remove('selected');
              });
              item.classList.add('selected');
            }
          });
          
          radioGroup.appendChild(item);
        });
      }

      // è·å–å½“å‰é€‰ä¸­çš„ç®—æ³•
      function getSelectedAlgorithm() {
        return algorithms.find(algo => algo.id === selectedAlgorithm);
      }

      // è®¡ç®—æ–‡æœ¬å“ˆå¸Œ
      async function calculateTextHash() {
        const text = document.getElementById('text-input').value.trim();
        if (!text) {
          alert('è¯·è¾“å…¥æ–‡æœ¬');
          return;
        }

        const algorithm = getSelectedAlgorithm();
        if (!algorithm) {
          alert('è¯·é€‰æ‹©ä¸€ä¸ªå“ˆå¸Œç®—æ³•');
          return;
        }

        showLoading('text');
        
        try {
          let hash;
          
          switch(algorithm.id) {
            case 'md5':
              hash = CryptoJS.MD5(text).toString();
              break;
            case 'sha1':
              hash = CryptoJS.SHA1(text).toString();
              break;
            case 'sha256':
              hash = CryptoJS.SHA256(text).toString();
              break;
            case 'sha512':
              hash = CryptoJS.SHA512(text).toString();
              break;
            case 'sha3-256':
              hash = sha3_256(text);
              break;
            case 'sha3-512':
              hash = sha3_512(text);
              break;
            default:
              hash = 'ä¸æ”¯æŒè¯¥ç®—æ³•';
          }
          
          displayResult(algorithm, hash);
        } catch (error) {
          console.error('è®¡ç®—å“ˆå¸Œæ—¶å‡ºé”™:', error);
          alert('è®¡ç®—å“ˆå¸Œæ—¶å‡ºé”™: ' + error.message);
        } finally {
          hideLoading('text');
        }
      }

      // è®¡ç®—æ–‡ä»¶å“ˆå¸Œ
      async function calculateFileHash() {
        if (!selectedFile) {
          alert('è¯·é€‰æ‹©æ–‡ä»¶');
          return;
        }

        const algorithm = getSelectedAlgorithm();
        if (!algorithm) {
          alert('è¯·é€‰æ‹©ä¸€ä¸ªå“ˆå¸Œç®—æ³•');
          return;
        }

        showLoading('file');
        showProgress(0);

        try {
          const file = selectedFile;
          
          // è¯»å–æ–‡ä»¶ä¸º ArrayBuffer
          const arrayBuffer = await readFileAsArrayBuffer(file);
          
          // è½¬æ¢ä¸º CryptoJS å¯ç”¨çš„æ ¼å¼
          const wordArray = CryptoJS.lib.WordArray.create(arrayBuffer);
          
          let hash;
          
          try {
            switch(algorithm.id) {
              case 'md5':
                hash = CryptoJS.MD5(wordArray).toString();
                break;
              case 'sha1':
                hash = CryptoJS.SHA1(wordArray).toString();
                break;
              case 'sha256':
                hash = CryptoJS.SHA256(wordArray).toString();
                break;
              case 'sha512':
                hash = CryptoJS.SHA512(wordArray).toString();
                break;
              case 'sha3-256':
                // å°† ArrayBuffer è½¬æ¢ä¸ºåå…­è¿›åˆ¶å­—ç¬¦ä¸²
                const hexString256 = arrayBufferToHex(arrayBuffer);
                hash = sha3_256(hexString256);
                break;
              case 'sha3-512':
                const hexString512 = arrayBufferToHex(arrayBuffer);
                hash = sha3_512(hexString512);
                break;
              default:
                hash = 'ä¸æ”¯æŒè¯¥ç®—æ³•';
            }
            
            // æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯
            showFileInfo(file);
            
            // æ˜¾ç¤ºç»“æœ
            displayResult(algorithm, hash);
            
          } catch (error) {
            console.error(`è®¡ç®— ${algorithm.name} å“ˆå¸Œæ—¶å‡ºé”™:`, error);
            alert(`è®¡ç®— ${algorithm.name} å“ˆå¸Œæ—¶å‡ºé”™: ${error.message}`);
          }
          
          hideLoading('file');
          hideProgress();
          
        } catch (error) {
          console.error('å¤„ç†æ–‡ä»¶æ—¶å‡ºé”™:', error);
          alert('å¤„ç†æ–‡ä»¶æ—¶å‡ºé”™: ' + error.message);
          hideLoading('file');
          hideProgress();
        }
      }

      // æ˜¾ç¤ºå•ä¸ªç»“æœ
      function displayResult(algorithm, hash) {
        const resultsSection = document.getElementById('results-section');
        const hashResults = document.getElementById('hash-results');
        
        resultsSection.style.display = 'block';
        hashResults.innerHTML = '';
        
        const hashItem = document.createElement('div');
        hashItem.className = 'hash-item';
        hashItem.innerHTML = `
          <div class="hash-header">
            <div class="hash-name">
              <span>${algorithm.name}</span>
              <span class="hash-bits">${algorithm.bits}</span>
            </div>
            <span style="font-size: 0.8rem; color: #666;">${hash.length} å­—ç¬¦</span>
          </div>
          <div class="hash-value">${hash}</div>
          <div class="hash-actions">
            <button class="copy-btn" data-hash="${hash}">å¤åˆ¶å“ˆå¸Œå€¼</button>
          </div>
        `;
        
        hashResults.appendChild(hashItem);
        
        // ä¸ºå¤åˆ¶æŒ‰é’®æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
        const copyBtn = hashItem.querySelector('.copy-btn');
        copyBtn.addEventListener('click', function() {
          const hash = this.getAttribute('data-hash');
          copyToClipboard(hash, this);
        });
        
        // æ»šåŠ¨åˆ°ç»“æœåŒºåŸŸ
        resultsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }

      // å…¶ä»–è¾…åŠ©å‡½æ•°ä¿æŒä¸å˜...
      // åŒ…æ‹¬ï¼šreadFileAsArrayBuffer, arrayBufferToHex, showFileInfo, formatFileSize,
      // showLoading, hideLoading, showProgress, hideProgress, copyToClipboard ç­‰

      // åˆå§‹åŒ–é¡µé¢
      document.addEventListener('DOMContentLoaded', function() {
        // åˆå§‹åŒ–ç®—æ³•é€‰æ‹©å™¨
        initAlgorithmSelector();
        
        // æ–‡æœ¬è®¡ç®—æŒ‰é’®äº‹ä»¶
        document.getElementById('calculate-text-btn').addEventListener('click', calculateTextHash);
        
        // æ¸…ç©ºæ–‡æœ¬æŒ‰é’®äº‹ä»¶
        document.getElementById('clear-text-btn').addEventListener('click', function() {
          document.getElementById('text-input').value = '';
        });
        
        // ç¤ºä¾‹æ–‡æœ¬æŒ‰é’®äº‹ä»¶
        document.getElementById('example-text-btn').addEventListener('click', function() {
          document.getElementById('text-input').value = 'Hello, World! è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ–‡æœ¬ï¼Œç”¨äºè®¡ç®—å“ˆå¸Œå€¼ã€‚';
        });
        
        // æ–‡ä»¶é€‰æ‹©äº‹ä»¶
        document.getElementById('file-input').addEventListener('change', function(e) {
          const file = e.target.files[0];
          if (file) {
            selectedFile = file;
            document.getElementById('file-name').textContent = `${file.name} (${formatFileSize(file.size)})`;
            document.getElementById('calculate-file-btn').disabled = false;
          } else {
            selectedFile = null;
            document.getElementById('file-name').textContent = 'æœªé€‰æ‹©æ–‡ä»¶';
            document.getElementById('calculate-file-btn').disabled = true;
          }
        });
        
        // æ–‡ä»¶è®¡ç®—æŒ‰é’®äº‹ä»¶
        document.getElementById('calculate-file-btn').addEventListener('click', calculateFileHash);
        
        // æ¸…é™¤æ–‡ä»¶æŒ‰é’®äº‹ä»¶
        document.getElementById('clear-file-btn').addEventListener('click', function() {
          document.getElementById('file-input').value = '';
          selectedFile = null;
          document.getElementById('file-name').textContent = 'æœªé€‰æ‹©æ–‡ä»¶';
          document.getElementById('calculate-file-btn').disabled = true;
        });
        
        // æ–‡æœ¬è¾“å…¥æ¡† Ctrl+Enter è®¡ç®—
        document.getElementById('text-input').addEventListener('keydown', function(e) {
          if (e.ctrlKey && e.key === 'Enter') {
            calculateTextHash();
          }
        });
      });

      // å…¶ä»–å·¥å…·å‡½æ•°ä¿æŒä¸å˜...
      function readFileAsArrayBuffer(file) {
        return new Promise((resolve, reject) => {
          const reader = new FileReader();
          reader.onload = e => resolve(e.target.result);
          reader.onerror = e => reject(new Error('è¯»å–æ–‡ä»¶å¤±è´¥'));
          reader.readAsArrayBuffer(file);
        });
      }

      function arrayBufferToHex(buffer) {
        const byteArray = new Uint8Array(buffer);
        return Array.from(byteArray, byte => byte.toString(16).padStart(2, '0')).join('');
      }

      function showFileInfo(file) {
        const fileInfo = document.getElementById('file-info');
        fileInfo.style.display = 'block';
        fileInfo.innerHTML = `
          <div class="file-info-title">æ–‡ä»¶ä¿¡æ¯</div>
          <div class="file-details">
            <div class="file-detail">
              <span class="detail-label">æ–‡ä»¶å:</span>
              <span class="detail-value">${file.name}</span>
            </div>
            <div class="file-detail">
              <span class="detail-label">æ–‡ä»¶å¤§å°:</span>
              <span class="detail-value">${formatFileSize(file.size)}</span>
            </div>
            <div class="file-detail">
              <span class="detail-label">ä¿®æ”¹æ—¶é—´:</span>
              <span class="detail-value">${new Date(file.lastModified).toLocaleString()}</span>
            </div>
            <div class="file-detail">
              <span class="detail-label">æ–‡ä»¶ç±»å‹:</span>
              <span class="detail-value">${file.type || 'æœªçŸ¥'}</span>
            </div>
          </div>
        `;
      }

      function formatFileSize(bytes) {
        if (bytes === 0) return '0 B';
        const k = 1024;
        const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
      }

      function showLoading(type) {
        if (type === 'text') {
          document.getElementById('text-loading').style.display = 'flex';
        } else if (type === 'file') {
          document.getElementById('file-loading').style.display = 'flex';
        }
      }

      function hideLoading(type) {
        if (type === 'text') {
          document.getElementById('text-loading').style.display = 'none';
        } else if (type === 'file') {
          document.getElementById('file-loading').style.display = 'none';
        }
      }

      function showProgress(percent) {
        const progress = document.getElementById('file-progress');
        const fill = document.getElementById('progress-fill');
        const text = document.getElementById('progress-text');
        
        progress.style.display = 'block';
        fill.style.width = `${percent}%`;
        text.textContent = `${Math.round(percent)}%`;
      }

      function hideProgress() {
        document.getElementById('file-progress').style.display = 'none';
      }

      async function copyToClipboard(text, button) {
        try {
          await navigator.clipboard.writeText(text);
          button.textContent = 'å·²å¤åˆ¶';
          button.classList.add('copied');
          setTimeout(() => {
            button.textContent = 'å¤åˆ¶å“ˆå¸Œå€¼';
            button.classList.remove('copied');
          }, 2000);
        } catch (err) {
          const textArea = document.createElement('textarea');
          textArea.value = text;
          document.body.appendChild(textArea);
          textArea.select();
          document.execCommand('copy');
          document.body.removeChild(textArea);
          button.textContent = 'å·²å¤åˆ¶';
          button.classList.add('copied');
          setTimeout(() => {
            button.textContent = 'å¤åˆ¶å“ˆå¸Œå€¼';
            button.classList.remove('copied');
          }, 2000);
        }
      }
    </script>
  </body>
</html>
