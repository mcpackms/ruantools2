---
// src/pages/tools/aes.astro
import Layout from '../../layouts/Layout.astro';
import AESEncryptor from '../../components/AESEncryptor.jsx';

const pageTitle = 'AES 加密/解密';
const pageDescription = '支持 AES-128/256 位密钥，以及 CBC, ECB, CTR 工作模式的在线加密解密工具。';
---

<Layout title={`${pageTitle} | 软糖工具`}>
  <div class="container mx-auto px-4 py-8 max-w-6xl">
    <!-- 页面标题和描述 -->
    <div class="mb-8">
      <h1 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-gray-100 mb-4">
        {pageTitle}
      </h1>
      <p class="text-lg text-gray-600 dark:text-gray-400">
        {pageDescription}
      </p>
    </div>

    <!-- AES 加密工具组件 -->
    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-8">
      <AESEncryptor client:load />
    </div>

    <!-- 使用说明部分 -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
      <!-- 左栏：工具说明 -->
      <div class="bg-gray-50 dark:bg-gray-900 rounded-xl p-6">
        <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4">使用说明</h2>
        
        <div class="space-y-4">
          <div>
            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-2">密钥格式</h3>
            <ul class="list-disc pl-5 space-y-1 text-gray-700 dark:text-gray-300">
              <li><strong>Hex 格式</strong>：16进制字符串（如：<code class="bg-gray-200 dark:bg-gray-700 px-1 rounded">0123456789abcdef0123456789abcdef</code>）</li>
              <li><strong>Base64 格式</strong>：Base64编码字符串</li>
              <li><strong>文本格式</strong>：UTF-8文本字符串</li>
            </ul>
          </div>

          <div>
            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-2">密钥长度要求</h3>
            <ul class="list-disc pl-5 space-y-1 text-gray-700 dark:text-gray-300">
              <li><strong>AES-128</strong>：16字节（128位）密钥</li>
              <li><strong>AES-256</strong>：32字节（256位）密钥</li>
            </ul>
          </div>

          <div>
            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-2">工作模式说明</h3>
            <ul class="list-disc pl-5 space-y-1 text-gray-700 dark:text-gray-300">
              <li><strong>CBC（密码块链接模式）</strong>：需要16字节IV（初始化向量）</li>
              <li><strong>ECB（电子密码本模式）</strong>：无需IV，简单但不安全</li>
              <li><strong>CTR（计数器模式）</strong>：需要16字节Nonce（类似IV）</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- 右栏：注意事项 -->
      <div class="bg-gray-50 dark:bg-gray-900 rounded-xl p-6">
        <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4">注意事项</h2>
        
        <div class="space-y-4">
          <div class="bg-yellow-50 dark:bg-yellow-900/30 border-l-4 border-yellow-400 p-4">
            <div class="flex">
              <div class="flex-shrink-0">
                <span class="text-yellow-500">⚠️</span>
              </div>
              <div class="ml-3">
                <h3 class="text-sm font-semibold text-yellow-800 dark:text-yellow-300">安全提醒</h3>
                <p class="mt-2 text-sm text-yellow-700 dark:text-yellow-400">
                  所有加密操作均在浏览器本地完成，数据不会上传到服务器。请妥善保管你的密钥。
                </p>
              </div>
            </div>
          </div>

          <div>
            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-2">IV/Nonce 要求</h3>
            <p class="text-gray-700 dark:text-gray-300 mb-2">
              对于 CBC 和 CTR 模式，IV/Nonce 必须是16字节（128位）：
            </p>
            <ul class="list-disc pl-5 space-y-1 text-gray-700 dark:text-gray-300">
              <li>可以使用随机生成的IV</li>
              <li>IV不需要保密，但必须唯一（不可重复使用）</li>
              <li>解密时必须使用加密时相同的IV</li>
            </ul>
          </div>

          <div>
            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-2">输出格式</h3>
            <p class="text-gray-700 dark:text-gray-300">
              加密结果可以选择 Hex 或 Base64 格式输出，解密时也需对应格式输入。
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- 技术信息 -->
    <div class="mt-8 pt-6 border-t border-gray-200 dark:border-gray-700">
      <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-3">技术信息</h3>
      <p class="text-gray-600 dark:text-gray-400 text-sm">
        本工具使用浏览器原生的 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Crypto_API" 
        class="text-blue-600 dark:text-blue-400 hover:underline">Web Crypto API</a> 实现，支持 AES 标准算法。
        加密结果与 OpenSSL 等标准工具兼容。
      </p>
    </div>
  </div>
</Layout>

<style>
  /* 页面特定的样式补充 */
  code {
    font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
    font-size: 0.875em;
  }
</style>
