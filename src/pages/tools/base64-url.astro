---
// 页面元数据
const pageTitle = "Base64 & URL 编解码工具 - RuanTools";
const description = "在线 Base64 编码/解码、URL 编码/解码工具，支持双向转换和实时预览。";
---

<html lang="zh-CN" class="h-full">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <title>{pageTitle}</title>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background-color: #f8fafc;
        color: #1e293b;
        margin: 0;
        padding: 0;
      }
      .container {
        max-width: 900px;
        margin: 0 auto;
        padding: 2rem 1rem;
      }
      .header {
        text-align: center;
        margin-bottom: 2rem;
      }
      .header h1 {
        font-size: 2rem;
        margin: 0 0 0.5rem;
        color: #0f172a;
      }
      .header p {
        color: #64748b;
        margin: 0;
      }
      /* 标签页样式 */
      .tabs {
        display: flex;
        background: white;
        border-radius: 0.75rem 0.75rem 0 0;
        overflow: hidden;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      }
      .tab {
        padding: 1rem 1.5rem;
        cursor: pointer;
        background: #f1f5f9;
        border: none;
        font-weight: 500;
        color: #64748b;
        transition: all 0.2s;
        flex: 1;
        text-align: center;
      }
      .tab.active {
        background: white;
        color: #3b82f6;
        box-shadow: inset 0 -2px 0 #3b82f6;
      }
      .tab-content {
        display: none;
        background: white;
        padding: 1.5rem;
        border-radius: 0 0 0.75rem 0.75rem;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      }
      .tab-content.active {
        display: block;
      }
      /* 输入输出区域 */
      .io-section {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
        margin-top: 1rem;
      }
      @media (max-width: 768px) {
        .io-section { grid-template-columns: 1fr; }
      }
      .io-box label {
        display: block;
        font-weight: 500;
        margin-bottom: 0.5rem;
        color: #374151;
      }
      textarea, input[type="text"] {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid #d1d5db;
        border-radius: 0.5rem;
        font-family: 'Monaco', 'Menlo', monospace;
        font-size: 0.9rem;
        resize: vertical;
        box-sizing: border-box;
      }
      textarea:focus, input:focus {
        outline: none;
        ring: 2px solid #3b82f6;
        border-color: #3b82f6;
      }
      .btn-group {
        display: flex;
        gap: 0.5rem;
        margin-top: 1rem;
        flex-wrap: wrap;
      }
      .btn {
        padding: 0.5rem 1rem;
        border: none;
        border-radius: 0.375rem;
        cursor: pointer;
        font-weight: 500;
        transition: background 0.2s;
      }
      .btn-primary { background: #3b82f6; color: white; }
      .btn-primary:hover { background: #2563eb; }
      .btn-secondary { background: #6b7280; color: white; }
      .btn-secondary:hover { background: #4b5563; }
      .btn-success { background: #10b981; color: white; }
      .btn-success:hover { background: #059669; }
      .info-text { font-size: 0.875rem; color: #6b7280; margin-top: 0.5rem; }
    </style>
  </head>
  <body class="h-full">
    <div class="container">
      <header class="header">
        <h1>Base64 & URL 编解码工具</h1>
        <p>快速进行 Base64 和 URL 格式的相互转换</p>
      </header>

      <main>
        <!-- 标签页导航 -->
        <div class="tabs">
          <button class="tab active" data-tab="base64">Base64 编解码</button>
          <button class="tab" data-tab="url">URL 编解码</button>
        </div>

        <!-- Base64 标签内容 -->
        <div id="base64" class="tab-content active">
          <div class="io-section">
            <div class="io-box">
              <label for="base64-input">原始文本</label>
              <textarea id="base64-input" rows="6" placeholder="输入要编码的文本，或粘贴 Base64 字符串进行解码"></textarea>
              <div class="btn-group">
                <button class="btn btn-primary" id="base64-encode">编码 →</button>
                <button class="btn btn-secondary" id="base64-decode">← 解码</button>
                <button class="btn btn-success" id="base64-copy">复制结果</button>
              </div>
            </div>
            <div class="io-box">
              <label for="base64-output">转换结果</label>
              <textarea id="base64-output" rows="6" readonly></textarea>
              <p class="info-text">Base64 常用于在文本环境中安全传输二进制数据。</p>
            </div>
          </div>
        </div>

        <!-- URL 标签内容 -->
        <div id="url" class="tab-content">
          <div class="io-section">
            <div class="io-box">
              <label for="url-input">原始 URL/文本</label>
              <textarea id="url-input" rows="6" placeholder="输入要编码的 URL，或粘贴编码后的 URL 进行解码"></textarea>
              <div class="btn-group">
                <button class="btn btn-primary" id="url-encode">编码 →</button>
                <button class="btn btn-secondary" id="url-decode">← 解码</button>
                <button class="btn btn-success" id="url-copy">复制结果</button>
              </div>
            </div>
            <div class="io-box">
              <label for="url-output">转换结果</label>
              <textarea id="url-output" rows="6" readonly></textarea>
              <p class="info-text">URL 编码用于确保特殊字符（如空格、中文）在 URL 中安全传输。</p>
            </div>
          </div>
        </div>
      </main>
    </div>

    <script>
      // 标签页切换逻辑
      document.querySelectorAll('.tab').forEach(tab => {
        tab.addEventListener('click', () => {
          // 移除所有激活状态
          document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
          document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
          // 添加当前激活状态
          tab.classList.add('active');
          document.getElementById(tab.dataset.tab).classList.add('active');
        });
      });

      // Base64 功能
      const base64Input = document.getElementById('base64-input');
      const base64Output = document.getElementById('base64-output');
      const base64EncodeBtn = document.getElementById('base64-encode');
      const base64DecodeBtn = document.getElementById('base64-decode');
      const base64CopyBtn = document.getElementById('base64-copy');

      base64EncodeBtn.addEventListener('click', () => {
        try {
          const encoded = btoa(unescape(encodeURIComponent(base64Input.value)));
          base64Output.value = encoded;
        } catch (e) {
          base64Output.value = '❌ 编码错误：输入包含无效字符';
        }
      });

      base64DecodeBtn.addEventListener('click', () => {
        try {
          const decoded = decodeURIComponent(escape(atob(base64Input.value)));
          base64Output.value = decoded;
        } catch (e) {
          base64Output.value = '❌ 解码错误：输入的 Base64 格式无效';
        }
      });

      base64CopyBtn.addEventListener('click', async () => {
        if (base64Output.value) {
          await navigator.clipboard.writeText(base64Output.value);
          base64CopyBtn.textContent = '已复制!';
          setTimeout(() => { base64CopyBtn.textContent = '复制结果'; }, 1500);
        }
      });

      // URL 功能
      const urlInput = document.getElementById('url-input');
      const urlOutput = document.getElementById('url-output');
      const urlEncodeBtn = document.getElementById('url-encode');
      const urlDecodeBtn = document.getElementById('url-decode');
      const urlCopyBtn = document.getElementById('url-copy');

      urlEncodeBtn.addEventListener('click', () => {
        try {
          urlOutput.value = encodeURIComponent(urlInput.value);
        } catch (e) {
          urlOutput.value = '❌ 编码错误';
        }
      });

      urlDecodeBtn.addEventListener('click', () => {
        try {
          urlOutput.value = decodeURIComponent(urlInput.value);
        } catch (e) {
          urlOutput.value = '❌ 解码错误：URL 格式无效';
        }
      });

      urlCopyBtn.addEventListener('click', async () => {
        if (urlOutput.value) {
          await navigator.clipboard.writeText(urlOutput.value);
          urlCopyBtn.textContent = '已复制!';
          setTimeout(() => { urlCopyBtn.textContent = '复制结果'; }, 1500);
        }
      });
    </script>
  </body>
</html>
